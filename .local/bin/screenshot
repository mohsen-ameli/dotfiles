#!/bin/sh
##########################
## Screenshot utilities brought together.
## Need grim and slurp installed.
##########################

base="$HOME/Pictures/screenshots"
name="$base/$(date +'%F_%T').png"

print_usage() {
	printf """Usage: screenshot [arguments]
	
arguments:
    --portion: \t screenshot a portion of the screen
    --full: \t screenshot the whole screen
"""
}

if [ "$1" = "--portion" ]; then
  grim -g "$(slurp)" $name
elif [ "$1" = "--full" ]; then
  grim $name
else
  print_usage
  exit 0
fi

wl-copy < "$name"

if [ $? -eq 0 ]; then
  out=$(dunstify --action="default,Reply" --action="forwardAction,Forward"  "Screenshot taken successfully!" "Click to view.")
  if [ $out -eq 2 ]; then
    xdg-open $name
  fi
fi
